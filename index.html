
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=windows-1252">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice 4.1.0  (Win32)">
	<META NAME="CREATED" CONTENT="0;0">
	<META NAME="CHANGEDBY" CONTENT="Lino Figueiredo">
	<META NAME="CHANGED" CONTENT="20140530;20525176">
	<META NAME="CHANGEDBY" CONTENT="Lino Figueiredo">
	<META NAME="CHANGEDBY" CONTENT="José Puga">
	<META NAME="CHANGEDBY" CONTENT="José Puga">
	<META NAME="CHANGEDBY" CONTENT="José Puga">
	<META NAME="CHANGEDBY" CONTENT="José Puga">
	<META NAME="CHANGEDBY" CONTENT="José Puga">
	<META NAME="CHANGEDBY" CONTENT="José Puga">
	<STYLE TYPE="text/css">
	body{ background: #141414;
  background: -moz-linear-gradient(top, #333333 0%, #141414 100%);
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #333333), color-stop(100%, #141414));
  background: -webkit-linear-gradient(top, #333333 0%, #141414 100%);
  background: -o-linear-gradient(top, #333333 0%, #141414 100%);
  background: -ms-linear-gradient(top, #333333 0%, #141414 100%);
  background: linear-gradient(to bottom, #333333 0%, #141414 100%);
  border-bottom: 2px solid #F00;
  border-top: 2px solid #F00;}
	<!--
		@page { margin: 2.01cm }
		TD P { margin-bottom: 0cm }
		P { margin-bottom: 0.2cm }
		A:link { so-language: zxx }
	-->
	
	</STYLE>
</HEAD>
<BODY LANG="pt-BR" DIR="LTR">
<TABLE WIDTH=100% BORDER=0 CELLPADDING=0 CELLSPACING=0 STYLE="page-break-before: always">
	<COL WIDTH=15*>
	<COL WIDTH=7*>
	<COL WIDTH=18*>
	<COL WIDTH=38*>
	<COL WIDTH=37*>
	<COL WIDTH=13*>
	<COL WIDTH=25*>
	<COL WIDTH=38*>
	<COL WIDTH=23*>
	<COL WIDTH=9*>
	<COL WIDTH=19*>
	<COL WIDTH=15*>
	<TR VALIGN=TOP>
		<TD COLSPAN=2 WIDTH=9% BGCOLOR="#000000" SDVAL="0" SDNUM="2070;1046;@">
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm; border: none; padding: 0cm">
			<BR><BR>
			</P>
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm; border: none; padding: 0cm">
			<BR><BR>
			</P>
			<P ALIGN=LEFT><BR>
			</P>
		</TD>
		<TD COLSPAN=7 WIDTH=75% BGCOLOR="#00000" SDVAL="0" SDNUM="2070;1046;@">
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm; border: none; padding: 0cm">
			<BR><BR>
			</P>
			<P ALIGN=CENTER STYLE="border-top: none; border-bottom: 1.00pt solid #00cccc; border-left: none; border-right: none; padding-top: 0cm; padding-bottom: 0.08cm; padding-left: 0cm; padding-right: 0cm; text-decoration: none"><A NAME="In&iacute;cio"></A>
			<FONT COLOR="#ff0000"><FONT face="Courier New, Courier, monospace, Palatino Linotype, Palatino, Century Schoolbook L, Times New Roman, serif"><FONT SIZE=6><B> O Carro Inteligente <img src="gtr.png" width="70" height="80"></B></FONT></FONT></FONT></P>
		</TD>
		<TD ROWSPAN=4 COLSPAN=3 WIDTH=17% BGCOLOR="#000000" SDVAL="0" SDNUM="2070;1046;@">
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm; border: none; padding: 0cm">
			<BR><BR>
			</P>
			<P ALIGN=CENTER STYLE="margin-bottom: 0.51cm; background: transparent; border: none; padding: 0cm; text-decoration: none">
			<IMG SRC="11.jpg" NAME="graphics1" ALIGN=RIGHT WIDTH=231 HEIGHT=110 BORDER=0><BR CLEAR=RIGHT><FONT COLOR="#ffffff"><FONT face="Baskerville, Palatino Linotype, Palatino, Century Schoolbook L, Times New Roman, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><B>LABSI</B></FONT></FONT></FONT></P>
			<P ALIGN=CENTER STYLE="margin-bottom: 0.51cm; background: transparent; border: none; padding: 0cm; text-decoration: none">
			<FONT COLOR="#ffffff"><FONT face="Baskerville, Palatino Linotype, Palatino, Century Schoolbook L, Times New Roman, serif"><FONT SIZE=3><B>2017/2018</B></FONT></FONT></FONT></P>
			<P ALIGN=CENTER><BR>
			</P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD COLSPAN=9 WIDTH=83% HEIGHT=34 BGCOLOR="#000000" SDVAL="0" SDNUM="2070;1046;@">
			<P ALIGN=LEFT STYLE="border: none; padding: 0cm; margin-left:10px; text-decoration: none">
			<FONT COLOR="#ffffff"><FONT FACE="Gill Sans, Gill Sans MT, Myriad Pro, DejaVu Sans Condensed, Helvetica, Arial, sans-serif"><FONT SIZE=4><B>Autores:</B></FONT></FONT></FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=6% BGCOLOR="#000000" SDVAL="0" SDNUM="2070;1046;@">
			<P ALIGN=LEFT><BR>
			</P>
		</TD>
		<TD COLSPAN=5 WIDTH=44% BGCOLOR="#000000" SDVAL="0" SDNUM="2070;1046;@">
			<P ALIGN=LEFT STYLE="border: none; padding: 0cm; text-decoration: none">
			<FONT COLOR="#000000"><FONT face="Gill Sans, Gill Sans MT, Myriad Pro, DejaVu Sans Condensed, Helvetica, Arial, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt"><FONT COLOR="#ffffff"><FONT SIZE=3> Jorge Afonso Barandas Queirós
			 (N&ordm; 1151410)</FONT></FONT></FONT></FONT></FONT>
			</P>
		</TD>
		<TD COLSPAN=3 WIDTH=33% BGCOLOR="#000000" SDVAL="0" SDNUM="2070;1046;@">
			<P ALIGN=LEFT STYLE="border: none; padding: 0cm; text-decoration: none">
			<FONT COLOR="#ffffff"><FONT FACE="Gill Sans, Gill Sans MT, Myriad Pro, DejaVu Sans Condensed, Helvetica, Arial, sans-serif"><FONT SIZE=3>1151410@isep.ipp.pt</FONT></FONT></FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=6% BGCOLOR="#000000" SDVAL="0" SDNUM="2070;1046;@">
			<P ALIGN=LEFT><BR>
			</P>
		</TD>
		<TD COLSPAN=5 WIDTH=44% BGCOLOR="#000000" SDVAL="0" SDNUM="2070;1046;@">
			<P ALIGN=LEFT STYLE="border: none; padding: 0cm; text-decoration: none">
			<FONT COLOR="#000000"><FONT FACE="Gill Sans, Gill Sans MT, Myriad Pro, DejaVu Sans Condensed, Helvetica, Arial, sans-serif"><FONT SIZE=3><FONT COLOR="#ffffff"> Francisco de Brito Vasconcelos
			 (N&ordm; 1150947)<br> <br> </FONT></FONT></FONT></FONT>
			 <audio controls src ="music.mp3">
			</P>
		</TD>
		<TD COLSPAN=3 WIDTH=33% BGCOLOR="#000000">
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm; border: none; padding: 0cm; text-decoration: none">
			<FONT COLOR="#ffffff"><FONT FACE="Gill Sans, Gill Sans MT, Myriad Pro, DejaVu Sans Condensed, Helvetica, Arial, sans-serif"><FONT SIZE=3>1150947@isep.ipp.pt</FONT></FONT></FONT></P>
			<P ALIGN=LEFT><BR>
			</P>
		</TD>
	</TR>
	<TR>
		<TD COLSPAN=3 WIDTH=16% HEIGHT=12 BGCOLOR="#000000" SDVAL="0" SDNUM="2070;1046;@">
			<P ALIGN=CENTER STYLE="border: none; padding: 0cm"><button style="  background: #b80000;
  background-image: -webkit-linear-gradient(top, #b80000, #ff0000);
  background-image: -moz-linear-gradient(top, #b80000, #ff0000);
  background-image: -ms-linear-gradient(top, #b80000, #ff0000);
  background-image: -o-linear-gradient(top, #b80000, #ff0000);
  background-image: linear-gradient(to bottom, #b80000, #ff0000);
  -webkit-border-radius: 28;
  -moz-border-radius: 28;
  border-radius: 28px;
  font-family: Arial;
  font-size: 20px;
  padding: 5px 30px 5px 30px;
  text-decoration: none;"><A HREF="#Introdu&ccedil;&atilde;o" style="text-decoration:none"><FONT COLOR="#ffffff"><SPAN STYLE="text-decoration: none"><FONT FACE="Impact, Charcoal, sans-serif"><FONT SIZE=3><SPAN LANG="pt-BR"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Introdu&ccedil;&atilde;o</SPAN></SPAN></SPAN></FONT></FONT></SPAN></FONT></A></button></P>
		</TD>
		<TD WIDTH=15% BGCOLOR="#000000" SDVAL="0" SDNUM="2070;1046;@">
			<P ALIGN=CENTER STYLE="border: none; padding: 0cm"><button style="  background: #b80000;
  background-image: -webkit-linear-gradient(top, #b80000, #ff0000);
  background-image: -moz-linear-gradient(top, #b80000, #ff0000);
  background-image: -ms-linear-gradient(top, #b80000, #ff0000);
  background-image: -o-linear-gradient(top, #b80000, #ff0000);
  background-image: linear-gradient(to bottom, #b80000, #ff0000);
  -webkit-border-radius: 28;
  -moz-border-radius: 28;
  border-radius: 28px;
  font-family: Arial;
  font-size: 20px;
  padding: 5px 30px 5px 30px;
  text-decoration: none;"><A HREF="#Arquitetura" style="text-decoration:none"><FONT COLOR="#FFFFFF"><SPAN STYLE="text-decoration: none"><FONT FACE="Impact, Charcoal, sans-serif"><FONT SIZE=3><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Arquitetura</SPAN></SPAN></FONT></FONT></SPAN></FONT></A></button></P>
		</TD>
		<TD WIDTH=14% BGCOLOR="#000000" SDVAL="0" SDNUM="2070;1046;@">
			<P ALIGN=CENTER STYLE="border: none; padding: 0cm"><button style="  background: #b80000;
  background-image: -webkit-linear-gradient(top, #b80000, #ff0000);
  background-image: -moz-linear-gradient(top, #b80000, #ff0000);
  background-image: -ms-linear-gradient(top, #b80000, #ff0000);
  background-image: -o-linear-gradient(top, #b80000, #ff0000);
  background-image: linear-gradient(to bottom, #b80000, #ff0000);
  -webkit-border-radius: 28;
  -moz-border-radius: 28;
  border-radius: 28px;
  font-family: Arial;
  font-size: 20px;
  padding: 5px 30px 5px 30px;
  text-decoration: none;"><A HREF="#Hardware" style="text-decoration:none"><FONT COLOR="#FFFFFF"><SPAN STYLE="text-decoration: none"><FONT FACE="Impact, Charcoal, sans-serif"><FONT SIZE=3><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Hardware</SPAN></SPAN></FONT></FONT></SPAN></FONT></A></button></P>
		</TD>
		<TD COLSPAN=2 WIDTH=15% BGCOLOR="#000000" SDVAL="0" SDNUM="2070;1046;@">
			<P ALIGN=CENTER STYLE="border: none; padding: 0cm"><button style="  background: #b80000;
  background-image: -webkit-linear-gradient(top, #b80000, #ff0000);
  background-image: -moz-linear-gradient(top, #b80000, #ff0000);
  background-image: -ms-linear-gradient(top, #b80000, #ff0000);
  background-image: -o-linear-gradient(top, #b80000, #ff0000);
  background-image: linear-gradient(to bottom, #b80000, #ff0000);
  -webkit-border-radius: 28;
  -moz-border-radius: 28;
  border-radius: 28px;
  font-family: Arial;
  font-size: 20px;
  padding: 5px 30px 5px 30px;
  text-decoration: none;"><A HREF="#Software" style="text-decoration:none"><FONT COLOR="#FFFFFF"><SPAN STYLE="text-decoration: none"><FONT FACE="Impact, Charcoal, sans-serif"><FONT SIZE=3><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Software</SPAN></SPAN></FONT></FONT></SPAN></FONT></A></button></P>
		</TD>
		<TD WIDTH=15% BGCOLOR="#000000" SDVAL="0" SDNUM="2070;1046;@">
			<P ALIGN=CENTER STYLE="border: none; padding: 0cm"><button style="  background: #b80000;
  background-image: -webkit-linear-gradient(top, #b80000, #ff0000);
  background-image: -moz-linear-gradient(top, #b80000, #ff0000);
  background-image: -ms-linear-gradient(top, #b80000, #ff0000);
  background-image: -o-linear-gradient(top, #b80000, #ff0000);
  background-image: linear-gradient(to bottom, #b80000, #ff0000);
  -webkit-border-radius: 28;
  -moz-border-radius: 28;
  border-radius: 28px;
  font-family: Arial;
  font-size: 20px;
  padding: 5px 30px 5px 30px;
  text-decoration: none;"><A HREF="#Resultados" style="text-decoration:none"><FONT COLOR="#FFFFFF"><SPAN STYLE="text-decoration: none"><FONT FACE="Impact, Charcoal, sans-serif"><FONT SIZE=3><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Resultados</SPAN></SPAN></FONT></FONT></SPAN></FONT></A></button></P>
		</TD>
		<TD COLSPAN=2 WIDTH=12% BGCOLOR="#000000" SDVAL="0" SDNUM="2070;1046;@">
			<P ALIGN=CENTER STYLE="border: none; padding: 0cm"><button style="  background: #b80000;
  background-image: -webkit-linear-gradient(top, #b80000, #ff0000);
  background-image: -moz-linear-gradient(top, #b80000, #ff0000);
  background-image: -ms-linear-gradient(top, #b80000, #ff0000);
  background-image: -o-linear-gradient(top, #b80000, #ff0000);
  background-image: linear-gradient(to bottom, #b80000, #ff0000);
  -webkit-border-radius: 28;
  -moz-border-radius: 28;
  border-radius: 28px;
  font-family: Arial;
  font-size: 20px;
  padding: 5px 30px 5px 30px;
  text-decoration: none;"><A HREF="#Conclus&otilde;es" style="text-decoration:none"><FONT COLOR="#FFFFFF"><SPAN STYLE="text-decoration: none"><FONT FACE="Impact, Charcoal, sans-serif"><FONT SIZE=3><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Conclus&otilde;es</SPAN></SPAN></FONT></FONT></SPAN></FONT></A></button></P>
		</TD>
		<TD COLSPAN=2 WIDTH=13% BGCOLOR="#000000" SDVAL="0" SDNUM="2070;1046;@">
			<P ALIGN=CENTER STYLE="border: none; padding: 0cm"><button style="  background: #b80000;
  background-image: -webkit-linear-gradient(top, #b80000, #ff0000);
  background-image: -moz-linear-gradient(top, #b80000, #ff0000);
  background-image: -ms-linear-gradient(top, #b80000, #ff0000);
  background-image: -o-linear-gradient(top, #b80000, #ff0000);
  background-image: linear-gradient(to bottom, #b80000, #ff0000);
  -webkit-border-radius: 28;
  -moz-border-radius: 28;
  border-radius: 28px;
  font-family: Arial;
  font-size: 20px;
  padding: 5px 30px 5px 30px;
  text-decoration: none;"><A HREF="#Refer&ecirc;ncias" style="text-decoration:none"><FONT COLOR="#FFFFFF"><SPAN STYLE="text-decoration: none"><FONT FACE="Impact, Charcoal, sans-serif"><FONT SIZE=3><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Refer&ecirc;ncias</SPAN></SPAN></FONT></FONT></SPAN></FONT></A></button></P>
		</TD>
	</TR>
	<TR>
		<TD COLSPAN=12 WIDTH=100% BGCOLOR="#000000" SDNUM="2070;1046;@">
			<P ALIGN=CENTER STYLE="background: #000000"><BR>
			</P>
		</TD>
	</TR>
	<TR>
		<TD COLSPAN=12 WIDTH=100% BGCOLOR="#eeeeee">
			<P ALIGN=CENTER STYLE="margin-bottom: 0.5cm; background: #eeeeee"><BR><BR>
			</P>
			<P ALIGN=CENTER STYLE="background: #eeeeee">
<center> <img src="gifagv.gif" border="2" width="500" height="405"> </center>
			</P>
            
            </P>
		</TD>
	</TR>
	<TR VALIGN=TOP bgcolor="#000000" height="50px">
		<TD COLSPAN=11 WIDTH=94%>
			<UL>
				<LI><P ALIGN=LEFT STYLE="  background: #000000; border: none; padding: 0cm"><A NAME="Introdu&ccedil;&atilde;o"></A>
				<SDFIELD TYPE=DOCINFO SUBTYPE=TITLE></SDFIELD><FONT FACE="Courier New, Courier, monospace"><FONT SIZE=5><SPAN STYLE="font-style: normal; color:#FFF">Introdu&ccedil;&atilde;o</SPAN></FONT></FONT></P>
			</UL>
		</TD>
        <TD WIDTH=6%>
			<P ALIGN=CENTER STYLE="border: none; padding: 0cm"><button style="background: #b80000;
  background-image: -webkit-linear-gradient(top, #b80000, #ff0000);
  background-image: -moz-linear-gradient(top, #b80000, #ff0000);
  background-image: -ms-linear-gradient(top, #b80000, #ff0000);
  background-image: -o-linear-gradient(top, #b80000, #ff0000);
  background-image: linear-gradient(to bottom, #b80000, #ff0000);
  -webkit-border-radius: 28;
  -moz-border-radius: 28;
  border-radius: 28px;
  font-family: Arial;
  font-size: 20px;
  padding: 5px 30px 5px 30px;
  text-decoration: none;
  margin-top:10px;">
  <A HREF="#In&iacute;cio" STYLE="text-decoration: none"><FONT COLOR="#FFFFFF"><SPAN STYLE="text-decoration: none"><FONT FACE="Thorndale, serif"><FONT SIZE=2><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal"><img src="img/home.ico" width="16px" height="16px"> In&iacute;cio</SPAN></SPAN></FONT></FONT></SPAN></FONT></A></button></P>
		</TD>
	</TR>
	<TR>
		<TD COLSPAN=12 WIDTH=100% VALIGN=TOP BGCOLOR="#eeeeee">
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm; border: none; padding: 0cm">
			<BR>
            
<h3 style="font-family:Baskerville, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif"><p STYLE="margin-left:80px; margin-right:80px; text-indent: 30px;">No âmbito da disciplina  "Laboratório de Sistemas", foi proposto construir um protótipo como trabalho final em que o requisito mínimo era um led a piscar à frquência de 1 HZ. </p>
<p STYLE="margin-left:80px; margin-right:80px; text-indent: 30px;">Após alguma discussão, análise e planeamento, escolhemos desenvolver (pela interatividade proporcionada) um veículo autónomo (AGV – "Automatic Guided Vehicule") que integrasse três tipos de aparelhos / sensores principais:</p>  
<p STYLE="margin-left:120px; margin-right:80px; text-indent: 30px;">• TCRT5000L : deteção da linha; </p>
<p STYLE="margin-left:120px; margin-right:80px; text-indent: 30px;">• HC-SR04 : sonar ultrassónico para deteção de obstáculos. </p>
<p STYLE="margin-left:120px; margin-right:80px; text-indent: 30px;">• HC-05 : módulo Bluetooth para comunicação RS-232 com o AGV(envio e receção de dados). </p>
<p STYLE="margin-left:80px; margin-right:80px; text-indent: 30px;">Antes de atingirmos uma fase final e já de conclusão, todo o processo foi envolvido em extensos períodos de pesquisa, montagem, programação e testes. Todos estas etapas serão descritas ao longo deste relatório.</p></h3>


			</P>
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm; background: #eeeeee"><BR>
            
			</P>
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm">
            <center> <img src="img1.jpg" border="2" width="1000" height="600"> </center><BR/>
            <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;">Fig. 1 - AGV : Valter</P></center>
			
			<P ALIGN=LEFT><BR>
			</P>
		</TD>
	</TR>
	<TR VALIGN=TOP bgcolor="#000000" height="50px">
		<TD COLSPAN=11 WIDTH=94%>
			<UL>
				<LI><P ALIGN=LEFT STYLE="background: #000000;font-family: Courier New, Courier, monospace; border: none; padding: 0cm; color:#FFF"><A NAME="Arquitetura"></A>
				<FONT SIZE=5>Arquitetura</FONT></P>
			</UL>
		</TD>
		<TD WIDTH=6%>
			<P ALIGN=CENTER STYLE="border: none; padding: 0cm"><button style="  background: #b80000;
  background-image: -webkit-linear-gradient(top, #b80000, #ff0000);
  background-image: -moz-linear-gradient(top, #b80000, #ff0000);
  background-image: -ms-linear-gradient(top, #b80000, #ff0000);
  background-image: -o-linear-gradient(top, #b80000, #ff0000);
  background-image: linear-gradient(to bottom, #b80000, #ff0000);
  -webkit-border-radius: 28;
  -moz-border-radius: 28;
  border-radius: 28px;
  font-family: Arial;
  font-size: 20px;
  padding: 5px 30px 5px 30px;
  text-decoration: none;
  margin-top:10px;"><A HREF="#In&iacute;cio" STYLE="text-decoration: none"><FONT COLOR="#FFFFFF"><SPAN STYLE="text-decoration: none"><FONT FACE="Thorndale, serif"><FONT SIZE=2><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal"><img src="img/home.ico" width="16px" height="16px"> In&iacute;cio</SPAN></SPAN></FONT></FONT></SPAN></FONT></A></button></P>
		</TD>
	</TR>
	<TR>
		<TD COLSPAN=12 WIDTH=100% VALIGN=TOP BGCOLOR="#eeeeee">
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm; border: none; padding: 0cm">
			<BR>
<h3 style="font-family:Baskerville, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif">
<p STYLE="margin-left:80px; margin-right:80px; text-indent: 30px;">Durante todo o crescimento e desenvolvimento do projeto, de modo a garantir o cumprimento de todos os objetivos por nós propostos, foi necessário planear, organizar e controlar todas as etapas distintas. Foi assim criada e  implementada a arquitetura de sistema que melhor proporcionasse a harmonia entre todas as células que o constituíam. </p>
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm">
            <center> <img src="arquitetura.png" border="2" width="500" height="405"> </center>
            <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;">Fig. 2 - Arquitetura do sistema</P></center>
			</P>
            <p STYLE="margin-left:80px; margin-right:80px; text-indent: 30px;">Como podemos analisar, o microcontrolador é o centro do sistema, é onde toda a informação dos sensores de linha, do módulo bluetooth e ultrassom é recebida e processada por ele, com posterior tomada de decisão conforme o programado.  Para cada situação, tanto as leituras dos sensores como o modo de atuação do microcontrolador será diferente e apropriado ao problema, incorporando uma simultânea atualização do LCD. </p>
            <p STYLE="margin-left:80px; margin-right:80px; text-indent: 30px;">Numa zona mais lateral do sistema surge a "ponte H" (L298N), sendo esta essencial pois constrói o elo de ligação e comunicação entre os motores e o microcontrolador.
Como sinalização e requisito obrigatório, paralelamente ao sistema principal, o microcontrolador estará a controlar um LED gerando uma onda quadrada de 1 Hz. </p>
<p STYLE="margin-left:80px; margin-right:80px; text-indent: 30px;"> O nosso protótipo apresenta 3 estados de funcionamento: Seguidor de Linha, SmartRobot (evita obstáculos) e ControloRemoto via Bluetooth. Estes 3 funcionamentos são distinguidos pelo microcontrolador através de um interruptor de 3 estados . Este , consoante a sua posição, informa o AGV sobre a funcionalidade pretendida. <br> <br> <br> <br>  </p>
 <center> <img src="gifsw.gif" border="2" width="500" height="400">  <br> <br> </center>
   <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;">Fig. 3 - AGV : Interruptor 3 estados</P></center>
<p STYLE="margin-left:80px; margin-right:80px; text-indent: 30px;"> <br> <br> Além de o microcontrolador poder decidir sozinho o que processar, mediante um programa desenvolvido por nós no MIT APP Inventor, AGVControl, conseguimos escolher o funcionamento desejado e também controlar o carro remotamente, como se fosse um carro telecomandado. Trataremos de aprofundar este tema mais à frente no relatório, na zona de <A HREF="#Software" style="text-decoration:none"><FONT COLOR="#ff5444"><SPAN STYLE="text-decoration: none"><FONT FACE="Impact, Charcoal, sans-serif"><FONT SIZE=3><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Software</SPAN></SPAN></FONT></FONT></SPAN></FONT></A></button>  </p>
			</P>
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm"><BR><BR> 
			</P>
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm"><BR><BR>
			</P>
			<P ALIGN=LEFT><BR>
			</P></h3>
		</TD>
	</TR>
	<TR VALIGN=TOP bgcolor="#000000" height="50px">
		<TD COLSPAN=11 WIDTH=94%>
			<UL>
				<LI><P ALIGN=LEFT STYLE="background: #000000;font-family: Courier New, Courier, monospace; border: none; padding: 0cm; color:#FFF"><A NAME="Hardware"></A>
				<FONT SIZE=5>Hardware</FONT></P>
			</UL>
		</TD>
		<TD WIDTH=6%>
			<P ALIGN=CENTER STYLE="border: none; padding: 0cm"><button style="  background: #b80000;
  background-image: -webkit-linear-gradient(top, #b80000, #ff0000);
  background-image: -moz-linear-gradient(top, #b80000, #ff0000);
  background-image: -ms-linear-gradient(top, #b80000, #ff0000);
  background-image: -o-linear-gradient(top, #b80000, #ff0000);
  background-image: linear-gradient(to bottom, #b80000, #ff0000);
  -webkit-border-radius: 28;
  -moz-border-radius: 28;
  border-radius: 28px;
  font-family: Arial;
  font-size: 20px;
  padding: 5px 30px 5px 30px;
  text-decoration: none;
  margin-top:10px;"><A HREF="#In&iacute;cio" STYLE="text-decoration: none"><FONT COLOR="#FFFFFF"><SPAN STYLE="text-decoration: none"><FONT FACE="Thorndale, serif"><FONT SIZE=2><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal"><img src="img/home.ico" width="16px" height="16px"> In&iacute;cio</SPAN></SPAN></FONT></FONT></SPAN></FONT></A></button></P>
		</TD>
	</TR>
	<TR>
		<TD COLSPAN=12 WIDTH=100% VALIGN=TOP BGCOLOR="#eeeeee">
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm; border: none; padding: 0cm">
			<BR>
<h3 style="font-family:Baskerville, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif">
<p STYLE="margin-left:10px; text-indent: 20px; font-size:23px"><u>Circuito de alimentação  com regulador</u> [<A HREF="#Refer&ecirc;ncias" STYLE="text-decoration: none">1</A>] </p>
<p STYLE="margin-left:90px; margin-right:80px;">• Pilha 8V Futaba 2200MAh , uma pilha com uma boa capacidade, é usada para alimentar o microprocessador;</p>
<p STYLE="margin-left:90px; margin-right:80px;">• Pilhas 4*1.5V, usadas para alimentação dos motores DC;</p>
<p STYLE="margin-left:10px; text-indent: 80px; margin-right:80px;">• Regulador de tensão 78L05 smd : Mantem à sua saída uma tensão constante de 5V;  </p>
<p STYLE="margin-left:10px; text-indent: 80px; margin-right:80px;">• Condensadores : Eliminação de ruídos das tensões de entrada e saída do 78l05 smd; </p>

			</P>
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm">
            <center> <img src="regtensao.jpg" border="2"> </center>
             <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;">Fig. 3 - Regulador de Tensão</P></center>
			</P>
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm"><BR>
<p STYLE="margin-left:10px; text-indent: 20px; font-size:23px"><u>Sensores </u></p>
<p STYLE="margin-left:10px; text-indent: 80px; margin-right:80px;">•  3 sensores TCRT5000L [<A HREF="#Refer&ecirc;ncias" STYLE="text-decoration: none">2</A>]  : 
Sensor que inclui um emissor de infravermelhos e um fototransístor que bloqueia a luz visível. </p>
<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm">
            <center> <img src="tcrt5000.jpg" border="2"> </center>
            <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;">Fig. 4 - TCRT5000L</P></center>

			</P>
             <p STYLE="margin-left:10px; text-indent: 80px; margin-right:80px;">O sensor irá funcionar segundo os seguintes parâmetros:  </p>
            <p STYLE="margin-left:10px; text-indent: 120px; margin-right:80px;">&rarr; O LED é acionado quando recebe uma tensão, emitindo um feixe de luz infravermelha ;
  </p>
            <p STYLE="margin-left:130px; margin-right:80px; ">&rarr; O fototransístor ativa a sua base quando recebe um feixe de luz infravermelha. Quando este encontra um objeto refletor, recebe a luz do LED refletida, onde o transístor irá conduzir a corrente entre o coletor e o emissor. No caso de o objeto não ser refletor, o fototransistor não irá ativar a sua base  porque não irá receber a luz do LED refletida, não conduzindo corrente. </p>
            
            			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm">
            <center> <img src="sensorivcirc.jpg" border="2"> </center>
            <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;">Fig. 5 -  Circuito TCRT5000L</P></center>

			</P>

<p STYLE="margin-left:10px; text-indent: 80px; margin-right:80px;">• HC-SR04 [<A HREF="#Refer&ecirc;ncias" STYLE="text-decoration: none">3</A>] : Este integrado inclui transmissores de ultrassom, receptor e circuíto de controlo.</p>
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm">
            <center> <img src="sonar.jpg" border="2" width="300" height="300"> </center>
            <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;">Fig. 6 -  HC-SR04</P></center>
			</P>
            <p STYLE="margin-left:10px; text-indent: 80px; margin-right:80px;">O sensor irá funcionar segundo os seguintes parâmetros:  </p>
            <p STYLE="margin-left:10px; text-indent: 120px; margin-right:80px;">&rarr; Um trigger é utilizado para, pelo menos, 10us de sinal com nível ascendente;  </p>
            <p STYLE="margin-left:10px; text-indent: 120px; margin-right:80px;">&rarr; Após o sinal de trigger terminar, o integrado envia automaticamente oito pulsos de 40 kHz;  </p>
            <p STYLE="margin-left:10px; text-indent: 120px; margin-right:80px;">&rarr; Após os oito pulsos serem enviados, o integrado coloca o pino respetivo do <i>"echo"</i> a 5V (flanco ascendente); </p>
            <p STYLE="margin-left:130px; margin-right:80px;">&rarr; Se o sinal enviado encontrar um obstáculo, refletirá e voltará para trás sendo intercetado pelo receptor, efetuando a mudança de valor, no pino respetivo do <i>"echo"</i>, de 5V para 0V (flanco  descendente);  </p>
            <p STYLE="margin-left:10px; text-indent: 120px; margin-right:80px;">&rarr; A distância será determinada pela seguinte fórmula :<br/><br/> <center>Distância (cm)  = Tempo (em que o sinal <i>"echo"</i> se mantém no flanco ascendente) /446,47 </center></p>
			</P>
            			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm">
            <center> <img src="diagramasonar.gif" border="2"> </center>
            <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;">Fig. 7 - Funcionamento HC-SR04</P></center>
			</P>
            <P ALIGN=LEFT STYLE="margin-bottom: 0.51cm"><BR>
<p STYLE="margin-left:10px; text-indent: 20px; font-size:23px"><u>Motor DC </u></p>
 <p STYLE="margin-left:90px; margin-right:80px;">• TT Motor for Arduino Smart Car [<A HREF="#Refer&ecirc;ncias" STYLE="text-decoration: none">4</A>] : O microcontrolador, juntamente com a ponte H, irão controlar a velocidade e direção do motor DC.</p>
            </P>
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm">
            <center> <img src="motordc.jpg" width="500" height="500" border="2"> </center>
            <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;">Fig. 8 - TT Motor for Arduino Smart Car</P></center>
            <P ALIGN=LEFT STYLE="margin-bottom: 0.51cm"><BR>
<p STYLE="margin-left:10px; text-indent: 20px; font-size:23px"><u>Circuito Principal</u></p>
<p STYLE="margin-left:90px; margin-right:80px;">• Microcontrolador ATMEGA324p [<A HREF="#Refer&ecirc;ncias" STYLE="text-decoration: none">5</A>] : Todo o controlo do AGV será efetuado pelo microcontrolador que irá processar a informação que recebe dos sensores e tratá-la de acordo com o software programado atuando por PWM nos motores variando a sua velocidade;</p>
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm">
            <center> <img src="atmega324p.jpg" border="2"> </center>
            <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;">Fig. 9 - Pinout ATMEGA 324P <br> <br> </P></center>
			</P>
<p STYLE="margin-left:10px; text-indent: 80px;">• 2 Condensadores : Eliminação de ruídos;</p>
<p STYLE="margin-left:10px; text-indent: 80px;">• LED RGB, a piscar à frequência de 1 Hz;</p>
<p STYLE="margin-left:10px; text-indent: 80px; margin-right:80px;">• Ponte H - L298N [<A HREF="#Refer&ecirc;ncias" STYLE="text-decoration: none">6</A>] : Controlo, independente, da direção e velocidade dos motores. A principal funcionalidade do driver é elevar a corrente de saída do microcontrolador,para dar aos motores ordem de aceleração, porque esta sai com um valor muito baixo(na ordem dos 0.02 A)</p>
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm">
            <center> <img src="l298n.jpg" border="2" width="500" height="405"> </center>
            <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;">Fig. 10 - Driver L298N <br> <br> </P></center>
			</P>
            </P>
            <P ALIGN=LEFT STYLE="margin-bottom: 0.51cm"><BR>
<p STYLE="margin-left:10px; text-indent: 20px; font-size:23px"><u>Circuito de Interface</u></p>
<p STYLE="margin-left:90px; margin-right:80px;">• LCD 16x2 [<A HREF="#Refer&ecirc;ncias" STYLE="text-decoration: none">7</A>] : Irá efetuar o display de informação processada pelo microcontrolador, contento sinalizações dos vários sensores, assim como o valor de PWM presente nos motores e o modo de funcionamento em que se encontra; <br> <br></p>
<center> <img src="img3.jpg" border="2" width="324" height="441"> <br> <br> </center>
            <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;">Fig. 11 - LCD 16*2 no AGV <br> <br> <br> </P></center>
			 <center> <img src="lcd.png" border="2" width="324" height="300">  <br> <br> </center>
			 <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> Fig. 12 - LCD 16*2  <br> <br> </P></center>

<p STYLE="margin-left:90px; margin-right:80px;">• 1 Interruptor de 3 estados : Cada estado define um modo de funcionamento: <br>   &#8594     Modo 1: Seguidor de Linha <br> &#8594      Modo 2: ControlaBluetooth <br>    &#8594     Modo 3: SmartRobot(Evita obstáculos)  <br> Ambos os modos possuem no LCD a informação sobre o estado das baterias dos motores, e mais à frente, na zona de <A HREF="#Software" style="text-decoration:none"><FONT COLOR="#ff5444"><SPAN STYLE="text-decoration: none"><FONT FACE="Impact, Charcoal, sans-serif"><FONT SIZE=3><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Software</SPAN></SPAN></FONT></FONT></SPAN></FONT></A></button> ,<br>   iremos provar como é que lidamos com a velocidade dos motores em função da bateria.   </p>
<p STYLE="margin-left:90px; margin-right:80px;">• 1 Módulo Bluetooth HC-05 : Capaz de receber e enviar informação sobre o microprocessador, de modo a obter uma melhor interação entre o AGV e o utilizador.  </p>
			<center> <img src="hc05.png" border="2" width="324" height="441"> <br> <br> </center>
            <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;">Fig. 13 - Módulo Bluetooth HC-05</P></center>

			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm"><BR>
            <center> <img src="img2.jpg" border="2" width="324" height="441"> <br> <br> </center>
            <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;">Fig. 14 - Interface </P></center>
			</P>

 <P ALIGN=LEFT STYLE="margin-bottom: 0.51cm"><BR>
 
 <p STYLE="margin-left:10px; text-indent: 20px; font-size:23px"><u>Esquemático do circuito</u></p>
 <p STYLE="margin-left:90px; margin-right:80px;">• A placa PCB foi desenhada segundo o seguinte esquemático de ligações elétricas.  </p>
             <center> <img src="schematic.png" border="2" width="1000" height="600" > <br> <br> 
<center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;">Fig. 15 - Esquemático </P></center>
<p STYLE="margin-left:10px; text-indent: 20px; font-size:23px"><u>Circuit board</u></p>
<p STYLE="margin-left:90px; margin-right:80px;">• A placa  foi desenhada com auxílio do software <i>"KiCad".</i> Foi usada uma placad picotada Arduino. O maior motivo de termos feito esta placa é a robustez, algo que não havia com uma breadboard, assim como uma melhor organização dos componentes e eliminação de muitos fios, que se podiam soltar ou mesmo causar confusão e mau aspeto a quem vê o circuito. </p>
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm"><BR>
            <center> <img src="pcb.jpg" border="2" width="493,35" height="600" > <br> <br> 
			<center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;">Fig. 16 - Placa  Real( Feita em casa com uma placa picotada) <br> <br> <br> </P></center>

            <img src="pcbeagle.png" border="2" width="1000" height="600" ></center>
            <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"><br> <br> <br>Fig. 17 - Placa Virtual(PCB-Printed Circuit Board) , feita no KiCad</P></center>
			</P>

            </P>
			<P ALIGN=LEFT><BR>
			</P></h3>
		</TD>
	</TR>
	<TR VALIGN=TOP bgcolor="#000000" height="50px">
		<TD COLSPAN=11 WIDTH=94%>
			<UL>
				<LI><P ALIGN=LEFT STYLE="background: #000000;font-family: Courier New, Courier, monospace; border: none; padding: 0cm; color:#FFF"><A NAME="Software"></A>
				<FONT SIZE=5>Software</FONT></P>
			</UL>
		</TD>
		<TD WIDTH=6%>
			<P ALIGN=CENTER STYLE="border: none; padding: 0cm"><button style="  background: #b80000;
  background-image: -webkit-linear-gradient(top, #b80000, #ff0000);
  background-image: -moz-linear-gradient(top, #b80000, #ff0000);
  background-image: -ms-linear-gradient(top, #b80000, #ff0000);
  background-image: -o-linear-gradient(top, #b80000, #ff0000);
  background-image: linear-gradient(to bottom, #b80000, #ff0000);
  -webkit-border-radius: 28;
  -moz-border-radius: 28;
  border-radius: 28px;
  font-family: Arial;
  font-size: 20px;
  padding: 5px 30px 5px 30px;
  text-decoration: none;
  margin-top:10px;"><A HREF="#In&iacute;cio" STYLE="text-decoration: none"><FONT COLOR="#FFFFFF"><SPAN STYLE="text-decoration: none"><FONT FACE="Thorndale, serif"><FONT SIZE=2><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal"><img src="img/home.ico" width="16px" height="16px"> In&iacute;cio</SPAN></SPAN></FONT></FONT></SPAN></FONT></A></button></P>
		</TD>
	</TR>
	<TR>
		<TD COLSPAN=12 WIDTH=100% VALIGN=TOP BGCOLOR="#eeeeee">
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm; border: none; padding: 0cm">
			<BR>
<h3 style="font-family:Baskerville, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif">
<p STYLE="margin-left:10px; text-indent: 20px; margin-right:80px;">Neste capítulo vamos analisar todo o software utilizado para o funcionamento do projeto. </p>















<p STYLE="margin-left:10px;font-family:  text-indent: 20px; font-size:23px"><u>Inicializações</u></p>

<p STYLE="margin-left:80px; margin-right:80px;">• Na zona de inicialização , temos a função inic(). Esta trata de definir os I/O´s , configurações de timers, para os motores e sonar, define a entrada analógica que vai medir a tensão das baterias dos motores, inicializa o LCD e por fim a função srand, que vai criar números aleatórios para uma parte do código que vamos analisar mais à frente, na zona da função do nosso AGV, FogeParedes(). </p>

			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm">
            <center> <img src="inic.png" border="2"> </center>
            <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"><br> <br> <br>Fig. 18 - Inicializações </P></center>
			</P>
            
			
			
<p STYLE="margin-left:80px; margin-right:80px;">• Seguidamente temos as variáveis globais utilizadas. O objetivo do uso de cada uma está explicada na fotografia em baixo. <br> <br> </p>
 <center> <img src="vars.png" border="2">   </center>
<br/>
            <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"><br> <br> <br>Fig. 19 - Variáveis Globais e a sua explicação </P></center>

<center>



            
<p STYLE="margin-left:80px; margin-right:80px;">• Os pinos que controlam a direção de rotação(2 pinos a cada motor) e a velocidade dos motores(OCR2A e OCR0B) são inicializados como saídas e ligam à ponte H.</p>

			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm">
            <center> <img src="inputsmotor.jpg" border="2"> </center>
            <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"><br> <br> <br>Fig. 20 - Pinos do Motor </P></center>
			</P>
            
			
			
<p STYLE="margin-left:80px; margin-right:80px;">• O LCD foi inicializado com : LCDInit(). Os parâmetros da função são o piscar do LCD e o traço que aparece debaixo da 1ª quadrícula. Estas funções relativas ao uso do LCD são invocadas pelo ficheiro "LCD.h" , e esta foi retirada da Internet , do site <br>
<a href="http://extremeelectronics.co.in/avr-tutorials/using-lcd-module-with-av" STYLE="text-decoration: none; color:red"><U>LCD EXTREME ELETRONICS</U></a>

 </p>

            
<p STYLE="margin-left:80px; margin-right:80px;"> <br> <br> <br>• O Timer1, inicializado fora do inic(), foi utilizado para contar o tempo do sonar de forma a que interrompe-se o programa o mínimo de vezes possível. <br> <br> <br> Juntamente com a inicalização do timer, também utilizamos flags auxiliares do timer, que se situam no registo TIFR ( Time Interrupt Flag Register), e as flags são  : <br> <br> <br> • ICF(Input Capture Flag) <br> <br> • TOV(Timer Overflow Flag)  <br> <br> Estas flags limpam-se a 1 ,e  não a 0 como de habitual, e dizem ao programa quando é que o Timer pode capturar o tempo de subida e descida da onda e também quando é que existe um overflow do Timer1. <br/>

<center> <br> <br> <img src="timer1.png" border="2"> <br> <br>  </center>
            <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"><br> <br> <br>Fig. 21 - Configuração do Timer1 </P></center>

			
 <br> <br> Convém salientar que , para capturar o tempo de subida e descida é preciso reconfigurar o timer, mudando o TCCR1B, e assim atualizar a flag ICR(Input Captur Register) , que tem como função armazenar o tempo de descida (echo ativo) <br> <br> <br>  No nosso caso, usamos uma interrupção do tipo OVF, que sempre que o Timer1 chega aos 65536, TimerOverFlow incrementa , e assim conseguimos medir a distância do sonar relativamente ao obstáculo. </p>


            <center> <img src="timer1ovf.png" border="2"> </center>
            <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"><br> <br> <br>Fig. 22 - Timer1 OVF Interrupção </P></center>

			
            
<p STYLE="margin-left:80px; margin-right:80px;">• O pino do <i>"echo"</i> do sonar é ligado a PD6, sendo que este corresponde ao pino do ICP( Interrupt Capture Pulse) . Este pino é responsável por medir a largura de um impulso , neste caso vai medir a do sonar.<br/> <br> Foi utilizado esse pino porque ele é capaz de detetar todas as mudanças de flanco neste pino, de forma a que seja possível contar o tempo desde o momento em que são emitidos os pulsos de ultrassom pelo sonar (flanco ascendente) até que este os volte a receber após terem sido refletidos por um obstáculo (flanco descendente). </p>

			 <p STYLE="margin-left:80px; margin-right:80px;"><br> <br> • USART0(Universal Synchronous Asynchronous Receiver Transmitter)  , foi utilizado para a interação entre microcontrolador e telemóvel, via Bluetooth, protagonizado pelo HC-05. Este registo é muito poderoso,e bem configurado, proporciona uma boa relação entre utilizador e máquina.<br>
<br> <br> Para configurar  este registo, foi preciso definir uma Baud Rate (9600) , síncrono, sem bit de paridade, com 8 bits de dados e com 1 stop bit. Esta configuração é feita na função usart_init(): 

			 </p>

			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm">
            <center><br> <br>  <img src="usart.png" border="2"> </center>
            <center> <br> <p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"><br> <br> <br>Fig. 23 - Configuração da USART </P></center>
			</P>
            

 <p STYLE="margin-left:80px; margin-right:80px;"><br> <br> • O ADC (<i>Analog-to-digital Converter</i>), foi utilizado para a leitura da tensão da bateria 4*1.5V  utilizando o canal ADC0. O resultado da conversão foi ajustado à esquerda, de forma a que se possa ler os 8-bits mais significativos do resultado da conversão (ADCH), obtendo assim uma leitura com 8-bits de resolução (sendo neste caso suficiente para o efeito). <br> <br> </p>

			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm">
            <center> <img src="adc.png" border="2"> </center>
            <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> <br> <br> <br>Fig. 24 - Configuração do ADC  <br> <br> <br> <br> <br> <br> <br> <br> </P></center>
			</P>
            
<p STYLE="margin-left:10px; text-indent: 20px; font-size:23px"><u>Função Principal - <i>main()</i></u></p>

<p STYLE="margin-left:80px; margin-right:80px;">• O programa inicia na função <i>"main()"</i>. Antes de tudo, fazemos um delay de 1s, para establizar o início do sistema, pois desta maneira concluimos que a probabilidade de haver "bugs" é menor. De seguida, chama-se a função das inicializações (que já foram referidas detalhadamente anteriormente). Antes do ciclo, é feita mais uma chamada, neste caso, à função ControlaBluetooth(). Esta função vai configurar a USART0 e vai inicialiazar a comunicação RS-232, em que vamos poder comunicar com o ATMEGA. Para efeitos de teste, antes de controlar o AGV, enviamos uma SMS via Bluetooth,  um terminal Android,  para confirmar que a comunicação está a ser bem sucedida:  <br> <br> <br> Todas as funções inseridas na fotografia em baixo foram usadas no intuito de estabelecer a ligação entre o ATMEGA e o Telemóvel, logo inserem-se como comandos da função ControlaBluetooth(). Daí serem funções universais, em que a usart_init() apenas configura a USART0 . A função usart_data_transmit(unsigned char data) tem como função armazenar ,na string de transmissão e receção de dados,  caracteres, enquanto o pino UDRE0(Usart Data Register Empty)  pertencente ao registo UCSR0A estiver desativado, ou seja, há algo no vetor para ser transmitido.
             <br> As outras funções são usadas para controlo caracteres e strings, antes e durante o envio de informação. <br> <br> A função ControlaBluetooth() fica então como na Figura 27:
			 <center> <br> <br>  <img src="controlabt.png" border="2" width="600" height="700"> </center>
			 
			             <center>  <p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> <br> <br> <br>Fig. 25 - Funções/Comandos da ControlaBluetooth() <br> <br> <br> <br> <br> <br> <br> <br> </P></center>

			  <center> <img src="terminal.png" border="2"> <br> </center>
			  
			  			             <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> <br> <br> <br>Fig. 26 - Terminal Android de comunicação Bluetooth <br> <br> <br> <br> <br> <br> <br> <br> </P></center>

			  <center> <img src="controlabtfunc.png" border="2"> <br> </center>
			  			             <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> <br> <br> <br>Fig. 27 - ControlaBluetooth() <br> <br> <br> <br> <br> <br> <br> <br> </P></center>

 
 
<p STYLE="margin-left:80px; margin-right:80px;">• Entramos agora no ciclo - while(1). A primeira coisa a fazer é achar o valor lógico dos pinos de entrada PB0 e PB1, pinos estes que ligam ao interruptor de 3 estados. É de salientar que esta verificação tem que ser frequente, porque o valor deverá ser atualizado sempre que mudar-mos a posição deste componente. Por isso é que é obrigatório tê-la no início do ciclo, ou seja, o progerama reinicia sempre a sua rotina verificando o estado do interruptor para saber o que irá fazer. <br> 
			  <center><br> <br>  <img src="switchmodo.png" border="2"> <br> </center>
			  			             <center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> <br> <br> <br>Fig. 28 - Averiguação do estado do interruptor <br> <br> <br> <br> <br> <br> <br> <br> </P></center>


<br> De seguida, temos a chamada da função lerad(), função que converte a tensão das baterias do motor para um valor digital, lido no ATMEGA, e de seguida este valor é impresso no LCD, de modo a obter uma noção do estado das pilhas. Este valor é convertido para o ADCH, porque estamos a usar só a parte alta da conversão de 10 bits, e de seguida aplicamos uma fórmula para calcular a tensão real. O divisor de tensão para ler a voltagem foi feito para à entrada do micro ter uma tensão de 3 volts máximo, então como as pilhas são de 6v, quando a tensão é 3 , multiplicamos por 2. Portanto, a medição é feita para metade da voltagem real.   
<br> <br> 
			  <center><br> <br>  <img src="lerad.png" border="2"> <br> </center>
			<center><p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> <br> <br> <br>Fig. 29 - lerad() e impressão da tensão <br> <br> <br> <br> <br> <br> <br> <br> </P></center>

<br> <br> 

<br>
Chegamos agora ao "cérebro" do nosso AGV: A fase em que ele em função do estado do interruptor vai decidir o que fazer. <br> •Se este estiver no estado 1(PB0 a 0 e PB1 a 1) vai executar o Modo "SegLine". <br> •Se estiver no estado 3(PB0 a 1 e PB1 a 0) vai executar o Modo "SmartRobot". <br> •Se ambos os pinos forem 1, este executa o "BT Control".

</p>


 
<p STYLE="margin-left:120px; margin-right:80px;">&rarr; Modo "Segline" - neste modo o veículo está preparado para realizar um percurso com início e fim. O carro apresenta inteligência para quando deixa de sentir os sensores a detetar preto, e também quando acaba a pista, e então sabe como proceder em ambos os casos. Também apresenta variacôes de velocidade em relação à voltagem dos motores e do estado dos sensores. Vamos falar como isso funciona mais á frente, na função Sensor(). </p>
 
             <center> <img src="segline.jpg" border="2">< </center>
			<center><br> <br> <p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> <br> <br> <br>Fig. 30 - Segline <br> <br> <br> <br> <br> <br> <br> <br> </P></center>

 
<p STYLE="margin-left:120px; margin-right:80px;">&rarr; Modo "SmartRobot" - neste modo o veículo anda aleatoriamente pelo chão, e quando deteta um obstáculo, evita-o, virando para um lado ou para o outro, também de uma forma aleatória. Neste modo também existe variação de velocidade, para uma melhor precisão de movimentos. Falaremos também disto mais à frente, na zona da função FogeParedes(). ,   </p>
  
              <center> <img src="smart.jpg" border="2"> </center>
			<center><br> <br> <p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> <br> <br> <br>Fig. 31 - SmartRobot <br> <br> <br> <br> <br> <br> <br> <br> </P></center>

  
<p STYLE="margin-left:120px; margin-right:80px;">&rarr; Modo "BT Control" - neste modo, é possível com o auxílio de uma aplicação feita por nós, no MIT APP Inventor, executar todas as tarefas propostas pelos restantes estados do interruptor, e também existe a opção de controlar o carro remotamente, tal e qual como um carro telecomandado. Falaremos disto mais detalhadamente, mas fica aqui uma fotografia da nossa aplicação, capaz de executar todas as intruções previamente faladas.  </p>
   
               <center> <img src="controlbt.jpg" border="2"> </center>
			<center><br> <br> <p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> <br> <br> <br>Fig. 32 - BT Control <br> <br> <br> <br> <br> <br> <br> <br> </P></center>
			
			
<center> <img src="app.png" border="2"> </center>
			<center><br> <br> <p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> <br> <br> <br>Fig. 33 - APP AGVControl <br> <br> <br> <br> <br> <br> <br> <br> </P></center>
			

			
    
<p STYLE="margin-left:80px; margin-right:80px;">Para se verificar constantemente o estado do interruptor, o nosso ciclo é formado por 3 condições iniciais, e são estas que definem qual o funcionamento a usar. </p>
 
 			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm">
            <center> <img src="estadosmain.png" border="2"> </center>
			<center><br> <br> <p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> <br> <br> <br>Fig. 34 - Condições gerais <br> <br> <br> <br> <br> <br> <br> <br> </P></center>
			</P>
            

 
 
 <p STYLE="margin-left:80px; margin-right:80px;"> Começando a analíse da função principal da main:  </p>
 <p> •Estado 1: SegLine
 
 			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm">
            <center> <img src="seglinecod.png" border="2"> </center>
			<center><br> <p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> <br> <br> <br>Fig. 35 - Código Segline <br> <br> <br> <br> <br> <br> <br> <br> </P></center>
			</P>
            

 <p STYLE="margin-left:80px; margin-right:80px;">Podemos começar por ver que temos 3 contadores no início: apagarlcd1, apagarlcd2, apagarlcd3. Estas variáveis são à vez incrementadas aquando da escolha do interruptor. Só incrementam uma vez, e servem para atualizar a informação escrita no LCD. Limpam os dados anteriores e acresentam nova informação sobre o que está a ocorrer. Neste modo aparece o nome do funcionamento, a tensão da bateria dos motores e também a cor que os sensores de linha estão a detetar(preto ou branco).Quando se muda de posição no interruptor, as variáveis do LCD são limpas para poder atualizar novamente o LCD.  </p>

 		 <p STYLE="margin-left:80px; margin-right:80px;">De seguida é chamada a função Sensor(), e esta vai tratar de analisar os valores lógicos dos sensores InfraVermelho e decide o que fazer ao AGV. <br> <br>   </p>
	
 
 
 <P ALIGN=LEFT STYLE="margin-bottom: 0.51cm">
            <center> <img src="sensor().png" border="2"> </center>
			<center><br>  <p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> <br> <br> <br>Fig. 36 - Sensor()  <br> <br> </P></center>
			</P>
 
 
 
 <p STYLE="margin-left:80px; margin-right:80px;"> Esta função o que faz é analisar constantemente o estado do sensores de linha da seguinte maneira: <br> <br> </p>
   <center> <img src="sensores.png" border="2"> </center>
			<center><br>  <p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> <br> <br> <br>Fig. 37 - Estado TCRT5000L  <br> <br> </P></center>
			
  <p STYLE="margin-left:80px; margin-right:80px;"> De seguida, com esses valores(0-Branco;1-Preto), vai verificar um conjunto de condições. Estas são:(Sensor Esquerda/Sensor Meio/Sensor Direita) <br> <br> <br>  <br> </p>
 
 
 
 
 
 
 
 
 
 
<p STYLE="margin-left:120px; margin-right:80px;">&rarr; <u>111</u> - Os sensores detetam todos preto. O AGV vai ser movido com velocidade máxima , e em caso de cruzamento ele segue sempre em frente. </p>
 
<p STYLE="margin-left:120px; margin-right:80px;">&rarr; <u>010</u> - O sensor do meio é o único em cima da linha. O AGV vai ser movido a uma velocidade mais baixa, de modo a percorrer o circuito com melhor precisão. Além disso, existe uma relação de velocidade com potência dos motores. Se a tensão das pilhas for inferior a 5.5 V, o AGV vai ser sujeito a uma maior velocidade(PWM do motor), e se a tensão for superior, a velocidade imposta vai ser menor. Assim vai haver um equilíbrio de velocidades,pois regulamos a tensão imposta nas rodas em relação à disponibilidade de energia do motor DC.<p STYLE=" color:red; " > Esta regulação de velocidade está presente em todos os restantes casos.</p>

<p STYLE="margin-left:120px; margin-right:80px;">&rarr; <u>011</u> - É realizada uma curva fechada para a direita  ,ou seja, é enviado um sinal de comando para a roda esquerda andar para a frente e para a direita andar ao contrário, assim o carro irá virar mais rápido. Este caso aplica-se com curvas de 90º. A variável "estadoanterior=2" servirá para um caso que será posteriormente explicado.</p>

<p STYLE="margin-left:120px; margin-right:80px;">&rarr; <u>110</u> -  É realizada uma curva fechada para a esquerda  ,ou seja, é enviado um sinal de comando para a roda direita andar para a frente e para a esquerda andar ao contrário, assim o carro irá virar mais rápido. Este caso aplica-se com curvas de 90º.A variável "estadoanterior=3" servirá para um caso que será posteriormente explicado. </p>


<p STYLE="margin-left:120px; margin-right:80px;">&rarr; <u>100</u> -  É realizada uma curva mais leve do que a anterior, também para a esquerda. Neste caso o único sensor a detetar preto é o da esquerda, então ele ajusta o carro de volta a pista, porque naquele momento o AGV está no lado direito dela. A variável "estadoanterior=5" servirá para um caso que será posteriormente explicado.</p>

<p STYLE="margin-left:120px; margin-right:80px;">&rarr; <u>001</u> -  É realizada também uma curva mais leve,mas para a direita. Neste caso o único sensor a detetar preto é o da direita, então ele ajusta o carro de volta a pista, porque naquele momento o AGV está no lado esquerdo dela. A variável "estadoanterior=4" servirá para um caso que será posteriormente explicado.</p>

<p STYLE="margin-left:120px; margin-right:80px;">&rarr; <u>000</u> - Todos os sensores detetam branco. Neste caso o AGV vai precisar de usar um auxiliar de memória, presente na variável "estadoanterior". <br><br>• Se esta for 2 ou 4, o carro vira para a direita.<br>• Se esta for 3 ou 5, o carro vira para a esquerda.<br> <br> <br><p STYLE="color:red";> Esta variável é uma das grandes virtudes do nosso projeto, pois guarda informação sobre o historial do movimento do AGV, e em situações de perda de orientação ou de final de trajeto consegue voltar à pista de uma forma bastante fluída.</p>


 			
			
			
			
			<p> •Estado 2: SmartRobot
 
 			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm">
            <center> <img src="robotcod.png" border="2"> </center>
			<center><br> <p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> <br> <br> <br>Fig. 38 - Código SmartRobot <br> <br> <br> <br> <br> <br> <br> <br> </P></center>
			</P>
			
			<p STYLE="margin-left:80px; margin-right:80px;">• Neste funcionamento, o início do código é bastante similar, porque existe um excerto de código onde atualizamos a informação do LCD com recurso às variáveis auxiliares acima referidas.A informação impressa neste caso será na mesma a tensão dos motores, "SmartRobot" e a distãncia que o AGV se encontra do obstáculo adiante.<br> De seguida, como ciclo , são chamadas as funções Sonar() e FogeParedes(), funções estas que vão evitar que o carro colida contra os obstáculos.
		. </p>

			
			<p> <br> <br> <br> <br> •Função Sonar(), responsável então por medir a distância entre o AGV e  o obstáculo: <br> <br> 
			<center> <img src="sonarcod.png" border="2"> </center>
						<center><br><br> <p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> <br> <br> <br>Fig. 39 - Código Sonar <br> <br> <br> <br> <br> <br> <br> <br> </P></center>
						
									<p STYLE="margin-left:80px; margin-right:80px;">•A primeira instrução é certificar que o pino do trigger está a 0, e depois, durante 10 microssegundos, enviar 8 pulsos de 40 kHz, e voltar a desabilitar o pino de saída do ATMEGA. Na entrada, echo, vamos medir a distância usando o ICP(Input Capture Pulse). Este pino mede o comprimento do pulso , que se encontra no falling edge da onda temporal do código, pertencente ao Timer1.<br>
Para isso,segundo o código, é necessário reconfigurar o TCCR1B, porque no início ele está pronto a capturar o trigger , mas agora é preciso capturar o echo, então usa -se o valor 0x01(capturar o flanco descendente).	Limpa-se o TCNT1, limpa-se as flags relativas ao pino ICP : TOV(Timer Overflow Flag) e ICF(Input Capture Flag), e enquanto a onda estiver a descrescer, é incrementar ao count o valor do ICR1( que é o valor do TCNT1) mais 655345* TimerOverFlow(número de vezes que existe overflow  ajuda a contar o tempo do pulso).<br> <br> <br></p> <p STYLE="color:red"> A distância é calculada por : velocidade do som*tempo, em que o tempo é igual ao tempo de pulso mais o tempo de intrução do programa no ATMEGA, e daí segundo cálculos, arredondar-mos para count/446.47.						</p>			
            
			<p> <br> <br> <br> <br> •Função FogeParedes(), responsável por guiar o carro em função da distãncia medida no Sonar : <br> <br>
						<center> <img src="fogeparedescod.png" border="2"> </center>

			
						<center><br> <p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> <br> <br> <br>Fig. 40 - Código FogeParedes()<br> <br> <br> <br> <br> <br> <br> <br> </P></center>

						<p STYLE="margin-left:80px; margin-right:80px;">• Nesta função, são impostas 3 condições:<br> &rarr; Distância maior que 60cm;<br>&rarr;  Distãncia entre 60cm e 30 cm; <br>&rarr;  Distância menor que 30 cm.  </p>
						
						<p STYLE="margin-left:80px; margin-right:80px;"><br> <br> • No 1º caso, o carro anda á velocidade máxima, sem restrições em relação à bateria dos motores,sempre em frente. </p>

						<p STYLE="margin-left:80px; margin-right:80px;"><br> <br> • No 2º caso, o carro anda com velocidade reduzida pois aproxima-se de um obstáculo. </p>

						<p STYLE="margin-left:80px; margin-right:80px;"><br> <br> • No 3º caso, o carro encontra-se a 30cm ou menos de um obstáculo. O procedimento neste caso é parar o carro e virar, de modo a da próxima leitura do sonar, ele não detetar obstáculos. O lado para qual ele vai seguir é definido pela condição em que se gera um número aleatório, e se ele for par, vira para a direita, senão vira para a esquerda. O ciclo definido dentro das condições foi calculado para o carro realizar uma curva de 90º aprox.. </p>

						<p STYLE="color:blue;margin-left:80px; margin-right:80px;"><br> <br> <br> Para concluir este funcionamento, é de realçar que nem sempre o sonar é necessário, devido à qualidade do mesmo. Mas na maior parte dos casos, existe uma boa medição da distância e o AGV comporta-se bem quando é preciso mudar de direção.O facto de a rotação ser aleatória faz com que o carro enquanto deteta obstáculos consiga "sentir" qual o melhor caminho a tomar, porque em certos casos , quando ele por exemplo vira à direita, se continuar a detetar o obstáculo, há forte probabilidade da próxima movimentação ser para a esquerda, e se desse lado não houver impedimento, o carro pode prosseguir o seu movimento, tornando o carro muito inteligente nesse aspeto.   </p>

						
						<p> •Estado 3: BT Control
 
 			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm">
            <center> <img src="btcontrolcod.png" border="2"> </center>
			<center><br> <p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> <br> <br> <br>Fig. 41 - Código BT Control <br> <br> <br> <br> <br> <br> <br> <br> </P></center>
			</P>
						
					<p> Este funcionamento é o mais interativo e completo de todos. Baseia-se em usar os 2 funcionamentos já falados,e  acrescenta uma nova funcionalidade: controlo do carro remoto, tal como se o telemóvel fosse um comando.
<br> A aplicação desenvolvida por nós tem 5 botões na zona de cima, e 2 em baixo:					
						
						            <center> <img src="appdiv.png" border="2"> </center>
			<center><br> <p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> <br> <br> <br>Fig. 42 - APP  <br> <br> <br> <br> <br> <br> <br> <br> </P></center>

						
											<p STYLE="margin-left:80px; margin-right:80px;"><br> <br> • Na zona a vermelho , é a zona remota do AGV, onde pelas condições é possível movimentar o AGV. Se o UDR(Usart Data Receiver) enviado pela aplicação para o HC-05 for: </p>
												
												<p>&rarr; F: Anda para a frente enquanto o botão da seta para cima estiver premido
												<p>&rarr; R: Anda para a direita enquanto o botão da seta para cima estiver premido
												<p>&rarr; L: Anda para a esquerda enquanto o botão da seta para cima estiver premido
												<p>&rarr; B: Anda para trás  enquanto o botão da seta para cima estiver premido
                                                <p>&rarr; S: Para o carro quando está a ser executado os funcionamentos da caixa verde
												
											<p STYLE="margin-left:80px; margin-right:80px;"><br> <br> • Na zona a verde , situa-se botões para as funcionalidades restantes, atuando a aplicação como um interruptor. </p>

												<p>&rarr; 1  : Modo SegLine
												<p>&rarr; 2  : Modo SmartRobot 
						
	<p STYLE="color:red;margin-left:80px; margin-right:80px;"><br> <br> • Na app, os botões foram configurados como "On-Click" , e na caixa verde, as condições são feitas por ciclos condicionais(while) para que quando o funcionamento estiver ativo e for carregado no Stop, o AGV fica parado á espera de instruções . </p>

						
<p STYLE="margin-left:80px; margin-right:80px;"><br> <br> <br> <br> <br> • Comprovando pelo código, todos os funcionamentos apresentam uma componente bastante similar. Trata-se do excerto que controla o LED. Usamos 3 varíaveis capazes de contar 500 milissegundos: "contadorled1","contadorled2","contadorled3". Os valores destas varíaveis, para cada caso, foram calculados com ajuda do Simulador do Atmel , e foram alterados até que o programa entrasse na condição passados cerca de 500ms. Os valores das variáveis para cada funcionamento mudam pois nem todos tem o mesmo tempo de processamento desde do início da iteração até que o valor iguale de modo a que entre na rotina do LED. </p>


<p> Caso 1:
 			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm">
            <center> <img src="ledcaso1.png" border="2"> </center>
			<center><br> <p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> <br> <br> <br>Fig. 43 - Caso 1 LED <br> <br> <br> <br> <br> <br> <br> <br> </P></center>
			</P>
            
			<p> Caso 2:
 			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm">
            <center> <img src="ledcaso2.png" border="2"> </center>
			<center><br> <p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> <br> <br> <br>Fig. 44- Caso 2 LED <br> <br> <br> <br> <br> <br> <br> <br> </P></center>
			</P>

			
			<p> Caso 3:
 			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm">
            <center> <img src="ledcaso3.png" border="2"> </center>
			<center><br> <p STYLE="color:#666; font-size:12px; font-family:Courier New, Courier, monospace, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif;"> <br> <br> <br>Fig. 45 - Caso 3 LED <br> <br> <br> <br> <br> <br> <br> <br> </P></center>
			</P>

			<p> Nota: Mudamos os valores do caso 1 e caso 2 para 550 e 35 respetivamente para obter uma melhor precisão, e assim o LED pisca a sensívelmente 1Hz.<br> <br> 
			
			
			
<br/><center><button style="  background: #ffffffs;
  background-image: -webkit-linear-gradient(top, #000000, #000000);
  background-image: -moz-linear-gradient(top, #ffffff, #ffffff);
  background-image: -ms-linear-gradient(top, #ffffff, #ffffff);
  background-image: -o-linear-gradient(top, #ffffff, #ffffff);
  background-image: linear-gradient(to bottom, #ffffff, #000000);
  font-family: Arial;
  font-size: 20px;
  padding: 5px 30px 5px 30px;
  margin-top:10px;">
<a href="fluxomain.html" STYLE="text-decoration: none; color:#FFF">Fluxograma Main</a>



</button></center>
<br/><center><button style="  background: #ffffffs;
  background-image: -webkit-linear-gradient(top, #000000, #000000);
  background-image: -moz-linear-gradient(top, #ffffff, #ffffff);
  background-image: -ms-linear-gradient(top, #ffffff, #ffffff);
  background-image: -o-linear-gradient(top, #ffffff, #ffffff);
  background-image: linear-gradient(to bottom, #ffffff, #000000);
  font-family: Arial;
  font-size: 20px;
  padding: 5px 30px 5px 30px;
  margin-top:10px;">

<a href="fluxosensor.html" STYLE="text-decoration: none; color:#FFF">Fluxograma Sensor</a>



</button></center>


</button></center>
<br/><center><button style="  background: #ffffffs;
  background-image: -webkit-linear-gradient(top, #000000, #000000);
  background-image: -moz-linear-gradient(top, #ffffff, #ffffff);
  background-image: -ms-linear-gradient(top, #ffffff, #ffffff);
  background-image: -o-linear-gradient(top, #ffffff, #ffffff);
  background-image: linear-gradient(to bottom, #ffffff, #000000);
  font-family: Arial;
  font-size: 20px;
  padding: 5px 30px 5px 30px;
  margin-top:10px;">

<a href="fluxosonar.html" STYLE="text-decoration: none; color:#FFF">Fluxograma Sonar</a>



</button></center>
</button></center>
<br/><center><button style="  background: #ffffffs;
  background-image: -webkit-linear-gradient(top, #000000, #000000);
  background-image: -moz-linear-gradient(top, #ffffff, #ffffff);
  background-image: -ms-linear-gradient(top, #ffffff, #ffffff);
  background-image: -o-linear-gradient(top, #ffffff, #ffffff);
  background-image: linear-gradient(to bottom, #ffffff, #000000);
  font-family: Arial;
  font-size: 20px;
  padding: 5px 30px 5px 30px;
  margin-top:10px;">

<a href="fluxofoge.html" STYLE="text-decoration: none; color:#FFF">Fluxograma FogeParedes</a>



</button></center>


			
			
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm"><BR><BR>
			</P>
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm"><BR><BR>
			</P>
			<P ALIGN=LEFT><BR>
			</P></h3>
		</TD>
	</TR>
	<TR VALIGN=TOP bgcolor="#000000" height="50px">
		<TD COLSPAN=11 WIDTH=94%>
			<UL>
				<LI><P ALIGN=LEFT STYLE="background: #000000;font-family: Courier New, Courier, monospace; border: none; padding: 0cm; color:#FFF"><A NAME="Resultados"></A>
				<FONT SIZE=5>Resultados</FONT></P>
			</UL>
		</TD>
		<TD WIDTH=6%>
			<P ALIGN=CENTER STYLE="border: none; padding: 0cm"><button style="  background: #b80000;
  background-image: -webkit-linear-gradient(top, #b80000, #ff0000);
  background-image: -moz-linear-gradient(top, #b80000, #ff0000);
  background-image: -ms-linear-gradient(top, #b80000, #ff0000);
  background-image: -o-linear-gradient(top, #b80000, #ff0000);
  background-image: linear-gradient(to bottom, #b80000, #ff0000);
  -webkit-border-radius: 28;
  -moz-border-radius: 28;
  border-radius: 28px;
  font-family: Arial;
  font-size: 20px;
  padding: 5px 30px 5px 30px;
  text-decoration: none;
  margin-top:10px;"><A HREF="#In&iacute;cio" STYLE="text-decoration: none"><FONT COLOR="#FFFFFF"><SPAN STYLE="text-decoration: none"><FONT FACE="Thorndale, serif"><FONT SIZE=2><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal"><img src="img/home.ico" width="16px" height="16px"> In&iacute;cio</SPAN></SPAN></FONT></FONT></SPAN></FONT></A></button></P>
		</TD>
	</TR>
	<TR>
		<TD COLSPAN=12 WIDTH=100% VALIGN=TOP BGCOLOR="#eeeeee">
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm; border: none; padding: 0cm">
			<BR>
            
           <h3 style="font-family:Baskerville, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif">
<p STYLE="margin-left:10px; text-indent: 20px; margin-right:80px;">O produto final obtido deste trabalho pode ser demonstrado nos seguintes modos de funcionamento:</p>

<p STYLE="margin-left:80px; margin-right:80px;">• Vídeo onde com o telemóvel controlamos todos os estados, inclusive os estados 1 e 2 do interruptor</p>

<center><button style="  background: #b80000;
  background-image: -webkit-linear-gradient(top, #b80000, #ff0000);
  background-image: -moz-linear-gradient(top, #b80000, #ff0000);
  background-image: -ms-linear-gradient(top, #b80000, #ff0000);
  background-image: -o-linear-gradient(top, #b80000, #ff0000);
  background-image: linear-gradient(to bottom, #b80000, #ff0000);
  font-family: Arial;
  font-size: 20px;
  padding: 5px 30px 5px 30px;
  margin-top:10px;">
<a href="https://www.youtube.com/watch?v=Bte2Lj46rhU" STYLE="text-decoration: none; color:#FFF">Video</a>
</button></center>


	<TR VALIGN=TOP bgcolor="#000000" height="50px">
		<TD COLSPAN=11 WIDTH=94%>
			<UL>
				<LI><P ALIGN=LEFT STYLE="background: #000000;font-family: Courier New, Courier, monospace; border: none; padding: 0cm; color:#FFF"><A NAME="Conclus&otilde;es"></A>
				
				<FONT SIZE=5>Conclus&otilde;es</FONT></P>
			</UL>
		</TD>
		<TD WIDTH=6%>
			<P ALIGN=CENTER STYLE="border: none; padding: 0cm"><button style="  background: #b80000;
  background-image: -webkit-linear-gradient(top, #b80000, #ff0000);
  background-image: -moz-linear-gradient(top, #b80000, #ff0000);
  background-image: -ms-linear-gradient(top, #b80000, #ff0000);
  background-image: -o-linear-gradient(top, #b80000, #ff0000);
  background-image: linear-gradient(to bottom, #b80000, #ff0000);
  -webkit-border-radius: 28;
  -moz-border-radius: 28;
  border-radius: 28px;
  font-family: Arial;
  font-size: 20px;
  padding: 5px 30px 5px 30px;
  text-decoration: none;
  margin-top:10px;"><A HREF="#In&iacute;cio" STYLE="text-decoration: none"><FONT COLOR="#FFFFFF"><SPAN STYLE="text-decoration: none"><FONT FACE="Thorndale, serif"><FONT SIZE=2><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal"><img src="img/home.ico" width="16px" height="16px"> In&iacute;cio</SPAN></SPAN></FONT></FONT></SPAN></FONT></A></button></P>
		</TD>
	</TR>
	<TR>
		<TD COLSPAN=12 WIDTH=100% VALIGN=TOP BGCOLOR="#eeeeee">
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm; border: none; padding: 0cm">
			<BR>
            
            <h3 style="font-family:Baskerville, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif">
            <p STYLE="margin-left:80px; margin-right:80px; text-indent: 30px;">Terminado o trabalho, conseguimos entender que os objetivos a que nos propusemos foram atingidos e o produto final ficou de acordo com o esperado. O AGV responde bastante rápido às diversas situações e permite ao utilizador uma grande interação através da aplicação Bluetooth. Apesar do resultado final ser o esperado existem pequenas falhas como é o caso do sonar, que por vezes faz leituras erradas, detetando obstáculos onde eles não existem. Como os restantes modos de funcionamento não causaram grandes impasses (modo seguir linha e modo Bluetooth), conseguimos disponibilizar mais tempo à construção física do protótipo (numa placa perfurada) o que tornou o AGV mais resistente. </p>
            <p STYLE="margin-left:80px; margin-right:80px; text-indent: 30px;"> A realização deste trabalho deu-nos a oportunidade de obter conhecimentos sobre hardware e programação quer a nível de sensores quer a nível do módulo Bluetooth. Como ao longo do semestre os resultados foram os pretendidos, o projeto tornou-se bastante cativador. </p>
			
			
			
			
			</P>
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm"><BR><BR>
			</P>
			<P ALIGN=LEFT STYLE="margin-bottom: 0.51cm"><BR><BR>
			</P>
			<P ALIGN=LEFT><BR>
			</P>
		</TD>
	</TR>
	<TR VALIGN=TOP bgcolor="#000000" height="50px">
		<TD COLSPAN=11 WIDTH=94%>
			<UL>
				
				<LI><P ALIGN=LEFT STYLE="background: #000000;font-family: Courier New, Courier, monospace; border: none; padding: 0cm; color:#FFF"><A NAME="Refer&ecirc;ncias"></A>
				
				<FONT SIZE=5>Refer&ecirc;ncias</FONT></P>
			</UL>
		</TD>
		<TD WIDTH=6%>
			<P ALIGN=CENTER STYLE="border: none; padding: 0cm"><button style="  background: #b80000;
  background-image: -webkit-linear-gradient(top, #b80000, #ff0000);
  background-image: -moz-linear-gradient(top, #b80000, #ff0000);
  background-image: -ms-linear-gradient(top, #b80000, #ff0000);
  background-image: -o-linear-gradient(top, #b80000, #ff0000);
  background-image: linear-gradient(to bottom, #b80000, #ff0000);
  -webkit-border-radius: 28;
  -moz-border-radius: 28;
  border-radius: 28px;
  font-family: Arial;
  font-size: 20px;
  padding: 5px 30px 5px 30px;
  text-decoration: none;
  margin-top:10px;"><A HREF="#In&iacute;cio" STYLE="text-decoration: none"><FONT COLOR="#FFFFFF"><SPAN STYLE="text-decoration: none"><FONT FACE="Thorndale, serif"><FONT SIZE=2><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal"><img src="img/home.ico" width="16px" height="16px"> In&iacute;cio</SPAN></SPAN></FONT></FONT></SPAN></FONT></A></button></P>
		</TD>
	</TR>
	<TR>
		<TD COLSPAN=12 WIDTH=100% VALIGN=TOP BGCOLOR="#eeeeee">
        
			<P ALIGN=LEFT STYLE="border: none; padding: 0cm"><BR>
<h4 style="font-family:Baskerville, 'Palatino Linotype', Palatino, 'Century Schoolbook L', 'Times New Roman', serif">          
<p STYLE="margin-left:10px; text-indent: 20px;">[1] "Ebay, Reguladores de Tensão", <a href="https://www.ebay.co.uk/itm/L78xx-Serie-Positive-Voltage-Regulator-IC-5V-9V-10V-12V-15V-18V-24V/200714883555?hash=item2ebb8a11e3:m:mQsEgarAIPlqhRUm2EUIbEA">https://www.ebay.co.uk/itm/L78xx-Serie-Positive-Voltage-Regulator-IC-5V-9V-10V-12V-15V-18V-24V/200714883555?hash=item2ebb8a11e3:m:mQsEgarAIPlqhRUm2EUIbEA</a></p>

<p STYLE="margin-left:10px; text-indent: 20px;">[2] "TCRT5000L Datasheet", <a href="http://www.vishay.com/docs/83760/TCRT5000L.pdf">http://www.vishay.com/docs/83760/TCRT5000L.pdf</a></p>

<p STYLE="margin-left:10px; text-indent: 20px;">[3] "HC-SR04 Datasheet", <a href="http://www.micropik.com/PDF/HCSR04.pdf">http://www.micropik.com/PDF/HCSR04.pdf</a></p>

<p STYLE="margin-left:10px; text-indent: 20px;">[4] "TT Gear Motor 3-12V DC 70mA For Arduino Smart Car", <a href="https://www.ebay.co.uk/itm/TT-Gear-Motor-3-12V-DC-70mA-For-Arduino-Smart-Car-Robot-65-22-mm-wires-cables/232565542248?hash=item3625fc8d68:m:mfpLOTa4zkb_scTh9kUPQTA">https://www.ebay.co.uk/itm/TT-Gear-Motor-3-12V-DC-70mA-For-Arduino-Smart-Car-Robot-65-22-mm-wires-cables/232565542248?hash=item3625fc8d68:m:mfpLOTa4zkb_scTh9kUPQTA</a> </p>

<p STYLE="margin-left:10px; text-indent: 20px;">[5] "ATMEGA324p Datasheet", <a href="https://www.google.pt/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=0ahUKEwiKzfn0yJbYAhVJxRQKHciSBo4QFggpMAA&url=http%3A%2F%2Fwww.atmel.com%2Fimages%2FAtmel-9255-Automotive-Microcontrollers-ATmega164P-B-ATmega324P-B-ATmega644P-B_Datasheet.pdf&usg=AOvVaw3EOMqTOWw4JYBNYfPVSw51">https://www.google.pt/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=0ahUKEwiKzfn0yJbYAhVJxRQKHciSBo4QFggpMAA&url=http%3A%2F%2Fwww.atmel.com%2Fimages%2FAtmel-9255-Automotive-Microcontrollers-ATmega164P-B-ATmega324P-B-ATmega644P-B_Datasheet.pdf&usg=AOvVaw3EOMqTOWw4JYBNYfPVSw51</a></p>

<p STYLE="margin-left:10px; text-indent: 20px;">[6] "LCD 16x2 Tutorial", <a href="http://www.electronicwings.com/avr-atmega/interfacing-lcd-16x2-in-4-bit-mode-with-atmega-16-32-">http://www.electronicwings.com/avr-atmega/interfacing-lcd-16x2-in-4-bit-mode-with-atmega-16-32- < </a></p>

<p STYLE="margin-left:10px; text-indent: 20px;">[7] "HC-05 Datasheet", <a href="https://www.gme.cz/data/attachments/dsh.772-148.1.pdf">https://www.gme.cz/data/attachments/dsh.772-148.1.pdf <br> <br> </a></p>

			</P></h4>
		</TD>
	</TR>
	<TR VALIGN=TOP bgcolor="#000000" height="50px">
		<TD COLSPAN=11 WIDTH=94%>
			<P ALIGN=LEFT STYLE="background: #000000"><BR>
			</P>
		</TD>
		<TD WIDTH=6%>
			<P ALIGN=CENTER STYLE="border: none; padding: 0cm"><button style="  background: #b80000;
  background-image: -webkit-linear-gradient(top, #b80000, #ff0000);
  background-image: -moz-linear-gradient(top, #b80000, #ff0000);
  background-image: -ms-linear-gradient(top, #b80000, #ff0000);
  background-image: -o-linear-gradient(top, #b80000, #ff0000);
  background-image: linear-gradient(to bottom, #b80000, #ff0000);
  -webkit-border-radius: 28;
  -moz-border-radius: 28;
  border-radius: 28px;
  font-family: Arial;
  font-size: 20px;
  padding: 5px 30px 5px 30px;
  text-decoration: none;
  margin-top:10px;"><A HREF="#In&iacute;cio" STYLE="text-decoration: none"><FONT COLOR="#FFFFFF"><SPAN STYLE="text-decoration: none"><FONT FACE="Thorndale, serif"><FONT SIZE=2><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal"><img src="img/home.ico" width="16px" height="16px"> In&iacute;cio</SPAN></SPAN></FONT></FONT></SPAN></FONT></A></button></P>
		</TD>
	</TR>
</TABLE>
<P ALIGN=LEFT><BR><BR>
</P>
<P ALIGN=LEFT><BR><BR>
</P>
<P ALIGN=LEFT><BR><BR>
</P>
<P ALIGN=LEFT><BR><BR>
</P>
<P ALIGN=CENTER><BR><BR>
</P>
</BODY>
</HTML>